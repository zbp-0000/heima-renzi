<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

</body>
<script>
//页面登录
async function handleLogin(){
  let loginForm = {mobile: '', password: ''}
  try {
    await actionLogin(loginForm)
    console.log('跳转页面')
  } catch (error) {
    console.log('页面报错',error)
  }
}
//user模块的action方法
async function actionLogin(){
  let token = await apiLogin()
  console.log("存储token到state", token)
}
//api的login方法
function apiLogin(){
  return request({
    url: '/sys/login',
    method: 'post'
  })
}
//请求request
function request(){
  return new Promise((resolve,reject)=>{
    //调用响应拦截器
    resolve(interceptorsResponse())
  })
}
//响应拦截器
function interceptorsResponse(){
  //成功请求
  // return 'abc'
  //方式1-产生错误
  // throw new Error('产生错误')
  return Promise.reject(new Error('产生错误'))

}

handleLogin()
</script>
</html>
